## 입력값의 유효성 - 신택스와 시맨틱, 그리고 `verify`와 `validate`

만약 빈 문자열을 입력하면 어떻게 될까? 아마 예외를 발생시켜야 할 것이다.

그렇다면 어디서 예외를 발생시켜야 할까? 입력 매니저에서 읽어와서 파싱할 떄?
아니면 그 값을 사용하는 메서드나 생성자의 검증 메서드에서?

상황에 따라 다르다. 입력 매니저는 입력값의 신택스만 verify 한다. 생성자와 메서드는 입력값의 시맨틱을 validate한다.

만약 숫자를 입력하라고 했는데 a를 입력했다면 입력 매니저가 예외를 발생시킬 것이다.
그렇다면 빈 문자열을 입력했다면 신택스 verify 실패라고 봐야할까? 아니면 시맨틱 validate 실패라고 봐야할까? 아니면 둘 다 아닐까?

### 빈 문자열이 허용될 수 있다면

빈 문자열이 허용될 수 있다는 것은 자동차의 생성자가 빈 문자열을 이름으로 갖는 것을 허용하겠다는 의미이다.
하지만 정책적으로 빈 문자열이 중복해서 발생하는 것은 용인할 수 없다. 자동차 간 구별이 불가능하기 때문이다.
따라서 빈 문자열을 이름으로 가지는 자동차는 단 하나만 허용될 수 있다.
그리고 또 하나 더! 자동차 하나로만 경주 게임을 수행할 수 있다는 것이 정책적으로 허용되어야 한다.

### 시멘틱 문제일까 신텍스 문제일까

이런 류의 문제는 문제 정의를 똑바로 하는 것이 중요하다.
신텍스 문제라는 것은 어떤 것이고 시멘틱 문제라는 것은 어떤 것일까?

나는 이렇게 정의했다.

> 시멘틱 문제 : if문을 통해 잡아내는 커스텀 예외

> 신텍스 문제 : 별도의 throw 없이 로직 상에서 발생하는 예외

단, 신택스 문제의 경우 부가적으로 if문을 통해 잡아낼 수도 있다. 그 이유는 뒤에서 설명하겠다. 일단 
코드를 보면 이렇다.

```java
String input = Console.readLine();
String[] splited = input.split(",");
List<String> result = List.of(splited);
```

문자열을 읽는다. 쉼표 기준으로 분리한다. 그걸 리스트로 만든다.
만약 개행 문자를 입력하면? 빈 문자열이 들어간 배열이 만들어진다. `[""]` 같은 느낌. 그냥 쉼표를 입력하면 아무런 문자열도 만들어지지 않는다. 아무런 문자열도 만들어지지 않는다는 것은 참가 자동차가 없다는 것이다. 그러면 게임 생성 시 예외가 발생해야 한다.

빈 문자열을 받을지 말지는 자동차 클래스의 책임이다 (시멘틱을 검증). 입력 매니저는 저 3줄의 코드에서 예외가 발생하지 않는 한 그 값을 그대로 전달한다 (신택스만 검증).

### 신택스 문제를 명시적인 예외로 잡는 이유

요구사항은 어떤 예외가 발생하든 간에 `IllegalArgumentException` 으로 던지게 되어있다. 하지만 다른 예외가 발생하면 좀 난감해진다. 그리고 코드 레벨에서 신택스 문제가 발생한다는 것을, 예외를 명시적으로 작성하여 알려줄 수도 있다.

가령 `int number = Integer.parseInt(input);` 에 대하여 input이 123, 23 이런 숫자가 아니라 a라는 문자가 들어왔다고 하자. 그러면 `java.lang.NumberFormatException` 이 발생한다. 우리는 이게 싫으니까 if문을 통해 미리 조건을 잡아서 `throw IllegalArgumentException` 을 던지고 싶을 수 있다.

뭐 어쨌거나 우리는 빈 문자열을 이름으로 받지는 않을 것이다. 그러고 그 예외를 입력 매니저가 아니라 그걸 인자로 받는 자동차 생성자에서 던질 것이다. 하지만 경주 횟수를 파싱해오는 경우에는 입력 매니저에서 예외를 던지겠지.