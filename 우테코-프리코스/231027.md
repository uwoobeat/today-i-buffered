# 자동차 경주

## 출력 방식에 대한 고민

1주차 과제에서는 각 클래스에 출력 로직이 결합되어 있었다.

사실 다른 사람들은 `InputView` 나 `OutputView` 를 쓰거나 문자열을 따로 관리하는 경우가 있는데... "이전 주차 과제에서는 굳이?" 싶었다. 물론 출력 로직이 비즈니스 로직과 결합되어 있는 것은 별로긴 하지만,
"견딜 수 있는 임계치"를 넘지 않았다고 생각한다.

"견딜 수 있는 임계치" 라는 건 결국 재사용성이나 추가적인 필요성이라고 생각한다.
가령 이전에는 각 클래스가 내부 상태에 대한 출력 책임을 가지므로 충분히 견딜만 했다.


`InputView`와 `OutputView` 같은 것들을 안 쓰겠다는 것은 아니다. 요구사항이 복잡해질수록 출력 로직과 비즈니스 로직을 분리해야 하는 것은 사실이다. 하지만 어떻게? 보통은 MVC니 뭐니 고민을 하겠지만 이렇게 "입출력 뷰를 써야겠다!" 라고 정답을 정해놓고 시작을 하는 것은 그리 좋은 방법이 아니라고 생각한다. 앞서 말했듯 오버킬을 만들 수 있기 때문에... 현재 문제점을 바탕으로 조금씩 개선해 나가는 것이 좋다.

출력 로직을 분리한다는 것은 결국 객체 내부에 가지고 있던 출력에 대한 책임을 다른 쪽으로 넘기는 것이다. 만약 기존에 있던 출력 로직을 `OutputView.print(...)` 같이 대체하는 것은 정답이 아니다.

결론부터 말하자면 1) 입출력 모듈과 "메세지"를 통해 통신하는 것이고 2) 이를 위해서 **입출력 단위를 기준으로 기능을 끊어내는 것이다**. 

숫자 야구의 "예상 숫자 입력"을 예시로 들 수 있다. 요구사항에 따르면 플레이어는 예상 숫자를 적절한 입력 요청 문구를 출력하고, 콘솔로부터 값을 입력받아서, 예상 넘버로 매핑해온다. 다음과 같은 식이다.

```java
public GameNumber guess() {
    this.guessedNumber = loadInputToGameNumber();
    return guessedNumber;
}

private GameNumber loadInputToGameNumber() {
    printGuessMessage();
    String input = Console.readLine();
    return GameNumber.from(input);
}

private static void printGuessMessage() {
    System.out.print("숫자를 입력해주세요 : ");
}
```

하나의 메서드는 하나의 일만 하고, 그 하나의 일을 잘 해야 한다. 어떤 메서드가 하나의 일만 하는지 어떻게 판단할 수 있을까? 그건 요구사항에 따라 달라진다. 보통은 유의미한 이름을 가진 메서드로 추출해낼 수 있으면 기존 메서드가 여러 가지의 일을 하고 있었다고 말할 수 있다.

위에서 제시한 메서드들은 어떨까? `guess()` 는 넘어간다 치자. 근데 `loadInputToGameNumber()`는 여러 가지의 일을 하고 있다. 하나는 입력 요청을 위한 메세지를 출력하는 것(`printGuessMessage()`)이고, 다른 하나는 콘솔로부터 값을 읽어와서 GameNumber로 매핑하는 것이다. 

어라? 콘솔로 값을 읽어오는 것과 게임 넘버로 매핑하는 것도 다른 일이라고 할 수 있지 않나요? 그렇게 말할 수도 있다. 방금 전에도 말했지만 "하나의 일"은 요구사항에 따라 달라진다고 했다. 그리고 그 요구사항에 따르면 우리는 하나의 일인지의 판단 기준을 입출력 동작으로 잡기로 했다.

왜? 그렇게 해야만 외부 입출력 모듈과 메세지를 통해 통신할 수 있기 때문이다. 만약 하나의 메세지에서 여러 가지 일을 해야 하고, 각각의 일에 대해서 여러 개의 입력과 출력이 필요하다면, 어쩔 수 없이 "내부에서 입출력 로직을 수행하게 된다. 이렇게 되면 객체들이 입출력 모듈을 알게 되어 결합도가 높아진다. 사실상 내부에서 출력 메서드를 호출하는 것과 차이가 없는 것이다!

객체가 수행하는 "어떠한 행동"이 있다고 하자. 가령 게임 넘버를 예측하는 `guess()` 같은 경우 플레이어의 `guesssedNumber` 에 예상한 게임 넘버를 할당하고, 반환하는 역할을 한다.

예상한 게임 넘버를 할당하기 위해서는? 입력 모듈로부터 사용자가 입력한 값을 받아와야 한다. 그리고 그 값을 매핑하고 프로퍼티에 할당한다. 만약 할당이 완료되었으면 그 결과를 출력 모듈에게 전달해준다 (이런 요구사항이 새로 생겼다고 하자.)

핵심은 뭐냐? 

입력 모듈 -> (입력 요청 메세지) -> 한 가지 일만 하기 -> (출력 요청 메세지) -> 출력 모듈

즉, **어떤 메서드는 어떤 일을 하기 전에, 입력 모듈에게 값을 요청해서 받아온다. 그리고 그 일을 수행하면, 결과를 출력 모듈에게 전송해서 처리하도록 한다. 이게 한 가지 단위(일)가 되도록 설계하는 것이 핵심이라 할 수 있겠다!**
